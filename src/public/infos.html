<!DOCTYPE html>
<html ng-app="TodoApp">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>TODO Liste - Mes informations</title>
    <!-- <script src="angular.min.js"></script> -->
    
    <!-- Angular Material style sheet -->
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/angular_material/1.1.12/angular-material.min.css">
    
    <!-- Angular Material requires Angular.js Libraries -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.6/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.6/angular-animate.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.6/angular-aria.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.6/angular-messages.min.js"></script>
    
    <!-- Angular Material Library -->
    <script src="https://ajax.googleapis.com/ajax/libs/angular_material/1.1.12/angular-material.min.js"></script>
    
    <script src="./js/index.js"></script>
    <link rel="stylesheet" href="./css/bootstrap.min.css">
    <link rel="stylesheet" href="./css/style.css">
    
    <script src="./js/infos.js"></script>
    <script src="./js/cookie.js"></script>
</head>

<body ng-controller=MonCompteController>
	<div class='navbar navbar-inverse navbar-fixed-top headroom' >
		<div class='container'>
			<div class='navbar-header'>
				<button type='button' class='navbar-toggle' data-toggle='collapse' data-target='.navbar-collapse'><span class='icon-bar'></span> <span class='icon-bar'></span> <span class='icon-bar'></span> </button>
				<a class='navbar-brand' href="./index.html"><img src='./img/favicon.png'> TaskList </a>
			</div>
			<div class='navbar-collapse collapse'>
				<ul class='nav navbar-nav pull-right'>
                    <li><a href='./index.html'>Accueil</a></li>
                    <li><a href='./meslistes.html'>Mes listes</a></li>
                    <li><a href='#'>Mon compte</a></li>
                    <li><a onclick="Logout()">Se déconnecter</a></li>
				</ul>
			</div>
		</div>
    </div>

    <div class="container content ">
        <div class="container col-sm-12 col-sm-offset-0">
            <h2 class="text-center">Mes informations</h2>
            <div class="table-responsive">
                <table class="table">
                    <thead class="thead-dark">
                        <tr>
                            <th scope="col"></th>
                            <th scope="col"></th>
                            <th scope="col"></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <form>
                                <td>
                                    Nom : 
                                </td>
                                <td>
                                    <span ng-class="{'hidden': enmodification==0}">{{userInfos.nomUser}}</span>
                                    
                                    <span ng-class="{'hidden': errorNom==false, 'text-danger text-center': errorNom==true}">
                                        * Nom obligatoire
                                    </span>
                                    <input ng-class="{'hidden': enmodification!=0}" type="text" ng-model="userInfos.nomUser" class="form-control">
                                </td>
                                
                                <td>
                                    <button ng-click="modifierChamp(0)" ng-class="{'hidden': enmodification==0}" class="btn btn-secondary mb-2" title="Modifer"><i class="fas fa-edit"></i></button>
                                    <button ng-click="modifierNom()" ng-class="{'hidden': enmodification!=0}" class="btn btn-secondary mb-2" title="Valider"><i class="fas fa-check"></i></button>
                                    <button ng-click="annulermodification()" ng-class="{'hidden': enmodification!=0}" class="btn btn-secondary mb-2" title="Annuler"><i class="far fa-window-close"></i></button>
                                </td>
                            </form>
                        </tr>
                        
                        <tr>
                            <form>
                                <td>
                                    Prénom : 
                                </td>
                                
                                <td>
                                    <span ng-class="{'hidden': enmodification==1}">{{userInfos.prenomUser}}</span>
                                    
                                    <span ng-class="{'hidden': errorPrenom==false, 'text-danger text-center': errorPrenom==true}">
                                        * Prénom obligatoire
                                    </span>
                                    <input ng-class="{'hidden': enmodification!=1}" type="text" ng-model="userInfos.prenomUser" class="form-control">
                                </td>
                                
                                <td>
                                    <button ng-click="modifierChamp(1)" ng-class="{'hidden': enmodification==1}" class="btn btn-secondary mb-2" title="Modifer"><i class="fas fa-edit"></i></button>
                                    <button ng-click="modifierPrenom()" ng-class="{'hidden': enmodification!=1}" class="btn btn-secondary mb-2" title="Valider"><i class="fas fa-check"></i></button>
                                    <button ng-click="annulermodification()" ng-class="{'hidden': enmodification!=1}" class="btn btn-secondary mb-2" title="Annuler"><i class="far fa-window-close"></i></button>
                                </td>
                            </form>
                        </tr>
                        
                        <tr>
                            <form>
                                <td>
                                    Email : 
                                </td>
                                
                                <td>
                                    <span ng-class="{'hidden': enmodification==2}">{{userInfos.emailUser}}</span>
                                    
                                    <span ng-class="{'hidden': errorEmail!=-1, 'text-danger text-center': errorEmail==-1}">
                                        * Email déjà utilisé
                                    </span>
                                    <span ng-class="{'hidden': errorEmail!=0, 'text-danger text-center': errorEmail==0}">
                                            * Email obligatoire
                                    </span>
                                    <input ng-class="{'hidden': enmodification!=2}" type="email" ng-model="userInfos.emailUser" class="form-control">
                                </td>
                                
                                <td>
                                    <button ng-click="modifierChamp(2)" ng-class="{'hidden': enmodification==2}" class="btn btn-secondary mb-2" title="Modifer"><i class="fas fa-edit"></i></button>
                                    <button type="submit" ng-click="modifierEmail()" ng-class="{'hidden': enmodification!=2}" class="btn btn-secondary mb-2" title="Valider"><i class="fas fa-check"></i></button>
                                    <button ng-click="annulermodification()" ng-class="{'hidden': enmodification!=2}" class="btn btn-secondary mb-2" title="Annuler"><i class="far fa-window-close"></i></button>
                                </td>
                            </form>
                        </tr>
                        
                        <tr>
                            <form>
                                <td>
                                    Pseudo : 
                                </td>
                                
                                <td>
                                    <span ng-class="{'hidden': enmodification==3}">{{userInfos.pseudoUser}}</span>
                                    
                                    <span ng-class="{'hidden': errorPseudo!=-1, 'text-danger text-center': errorPseudo==-1}">
                                        * Pseudo déjà utilisé
                                    </span>
                                    <span ng-class="{'hidden': errorPseudo!=0, 'text-danger text-center': errorPseudo==0}">
                                        * Pseudo obligatoire (5 caratères minimums)
                                    </span>
                                    <input ng-class="{'hidden': enmodification!=3}" type="text" ng-model="userInfos.pseudoUser" class="form-control">
                                </td>
                                
                                <td>
                                    <button ng-click="modifierChamp(3)" ng-class="{'hidden': enmodification==3}" class="btn btn-secondary mb-2" title="Modifer"><i class="fas fa-edit"></i></button>
                                    <button ng-click="modifierPseudo()" ng-class="{'hidden': enmodification!=3}" class="btn btn-secondary mb-2" title="Valider"><i class="fas fa-check"></i></button>
                                    <button ng-click="annulermodification()" ng-class="{'hidden': enmodification!=3}" class="btn btn-secondary mb-2" title="Annuler"><i class="far fa-window-close"></i></button>
                                </td>
                            </form>
                        </tr>
                        
                        <tr>
                            <form>
                                <td>
                                    Mot de passe : 
                                </td>
                                
                                <td>
                                    <span ng-class="{'hidden': enmodification==4}" ng-repeat="c in userInfos.mdpUser">
                                        *
                                    </span>
                                    <div ng-class="{'hidden': enmodification!=4}" class="form-group row">
                                        <label class="col-sm-4 col-form-label">Ancien </label>
                                        <span ng-class="{'hidden': errorAncienMdp==false, 'text-danger text-center': errorAncienMdp==true}">
                                             * Mot de passe erroné
                                        </span>
                                        <div class="col-sm-8">
                                            <input type="password" ng-model="formData.AmdpUser" class="form-control">
                                        </div>
                                    </div>
                                    <div ng-class="{'hidden': enmodification!=4}" class="form-group row">
                                        <label class="col-sm-4 col-form-label">Nouveau </label>
                                        
                                        <span ng-class="{'hidden': errorMdp==false, 'text-danger text-center': errorMdp==true}">
                                            * Utilisez 8 caractères ou plus pour votre mot de passe.
                                        </span>
                                        <div class="col-sm-8">
                                            <input type="password" ng-model="formData.mdpUser" class="form-control">
                                        </div>
                                    </div>
                                    <div ng-class="{'hidden': enmodification!=4}" class="form-group row">
                                        <label class="col-sm-4 col-form-label">Confirmation </label>
                                        <span ng-class="{'hidden': errorMdpConf==false, 'text-danger text-center': errorMdpConf==true}">
                                             * Les mots de passe ne correspondent pas. Veuillez réessayer.
                                        </span>
                                        <div class="col-sm-8">
                                            <input type="password" ng-model="formData.NmdpUserConf" class="form-control">
                                        </div>
                                    </div>
                                </td>
                                
                                <td>
                                    <button ng-click="modifierChamp(4)" ng-class="{'hidden': enmodification==4}" class="btn btn-secondary mb-2" title="Modifer"><i class="fas fa-edit"></i></button>
                                    <button ng-click="modifierMdp()" ng-class="{'hidden': enmodification!=4}" class="btn btn-secondary mb-2" title="Valider"><i class="fas fa-check"></i></button>
                                    <button ng-click="annulermodification()" ng-class="{'hidden': enmodification!=4}" class="btn btn-secondary mb-2" title="Annuler"><i class="far fa-window-close"></i></button>
                                </td>
                            </form>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</body>
</html>